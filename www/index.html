<!DOCTYPE html>

<html>
<head>
	<title>KAISER AHMED | Home Page</title>
	<meta content="A responsive website of Kaiser with the new Twitter Bootstrap 3 for IT 354 course." name="description"><!-- Mobile viewport optimized -->
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"><!-- Bootstrap CSS -->
	<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="includes/css/bootstrap-glyphicons.css" rel="stylesheet"><!-- Custom CSS -->
	<link href="includes/css/styles.css" rel="stylesheet">
	<link href="css/custom.css" rel="stylesheet"><!-- Include Modernizr in the head, before any other Javascript -->

	<script src="includes/js/modernizr-2.6.2.min.js">
	</script><!-- All Javascript at the bottom of the page for faster page loading -->
	<!-- First try for the online version of jQuery-->
	<!-- <script src="http://code.jquery.com/jquery.js"></script> -->
	<!-- If no online access, fallback to our hardcoded version of jQuery -->
	<!-- <script>window.jQuery || document.write('<script src="includes/js/jquery-1.8.2.min.js"><\/script>')</script> -->
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />

	<script src="http://code.jquery.com/jquery-1.11.1.min.js">
	</script>
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js">
	</script><!-- Bootstrap JS -->

	<script src="bootstrap/js/bootstrap.min.js">
	</script>
	<style media="screen">
	body .ui-body-a, body .ui-overlay-a {
		 text-shadow:0 0 0 !important;
	}

	body .ui-body-b, body .ui-overlay-b {
		 text-shadow:0 0 0 !important;
	}

	body .ui-body-c, body .ui-overlay-c {
		 text-shadow:0 0 0 !important;
	}
	.ui-overlay-a, .ui-page-theme-a, .ui-page-theme-a .ui-panel-wrapper{
		text-shadow:0 0 0 !important;
	}
	</style>
</head>

<body>
	<div class="container" id="main">
		<div class="navbar navbar-fixed-top">
			<div class="container">
				<!-- .btn-navbar is used as the toggle for collapsed navbar content -->
				 <button class="navbar-toggle" data-target=".navbar-responsive-collapse" data-toggle="collapse" type="button"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/"><img alt="Kaiser Ahmed Logo" src="images/logo.png"></a>

				<div class="nav-collapse collapse navbar-responsive-collapse">
					<ul class="nav navbar-nav">
						<li class="active">
							<a href="#">Home</a>
						</li>


						<li>
							<a href="#">About</a>
						</li>
					</ul>


					<ul class="nav navbar-nav pull-right">
						<li class="dropdown">
							<a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="glyphicon glyphicon-user"></span> My Account <strong class="caret"></strong></a>

							<ul class="dropdown-menu">
								<li>
									<a href="#"><span class="glyphicon glyphicon-wrench"></span> Settings</a>
								</li>


								<li>
									<a href="#"><span class="glyphicon glyphicon-lock"></span> Login</a>
								</li>
							</ul>
						</li>
					</ul>
					<!-- end nav pull-right -->
				</div>
				<!-- end nav-collapse -->
			</div>
			<!-- end container -->
		</div>
		<!-- end navbar -->


		<div class="row" id="featuresHeading">
			<div class="col-12">
				<h2>Hello!</h2>


				<p class="lead">Weather forcast- PhoneGap App.</p>
			</div>
			<!-- end col-12 -->
		</div>
		<!-- end featuresHeading -->


		<div class="row" id="features">
			<div class="col-sm-4 feature">
				<div class="panel">
					<div class="panel-heading">
						<h3 class="panel-title">Get GEO location and Weather forcast</h3>
					</div>
					<!-- end panel-heading -->


					<div>
						<button class="btn btn-primary btn-block" id="getPosition">Get Location</button><br>


						<div id="positionDetails">
						</div>
					</div>
					<br>


					<div class="">
						<button class="btn btn-success btn-block" id="getWeather">Get Weather</button><br>


						<div class="" id="displayWeather">
							<h2 id="city">
							</h2>
							<br>


							<h3 id="F"><span id="temp"></span>&#8457;</h3>
							<!-- <h3 id="C"> <span  id ="tempC"> </span>&#8451;</h3> -->
							<!-- <button type="button" class="btn btn-default"> C / F </button> -->
							<br>


							<p id="desc">
							</p>
							<br>
							<img alt="weather image" class="img-responsive" id="url" src="">

							<p id="humidity">
							</p>


							<div id="map-canvas">
							</div>
						</div>
					</div>
				</div>
				<!-- end panel -->
			</div>
			<!-- end feature -->


			<div class="col-sm-4 feature">
				<div class="panel">
					<div class="panel-heading">
						<h3 class="panel-title">About Me</h3>
					</div>
					<!-- end panel-heading -->
					<img alt="Kaiser Ahmed" class="img-circle" src="images/profile_picture.jpg">

					<p>I am a graduate student at Illinois State University.</p>
					<a class="btn btn-warning btn-block" href="https://www.linkedin.com/in/kaiserahmed/" target="_blank">My LinkedIn profile</a>
				</div>
				<!-- end panel -->
			</div>
			<!-- end feature -->


			<div class="col-sm-4 feature">
				<div class="panel">
					<div class="panel-heading">
						<h3 class="panel-title">My Passion</h3>
					</div>
					<!-- end panel-heading -->
					<img alt="My Passion" class="img-circle" src="images/my_passion.jpg">

					<p>I am passionate about everything related to web development. My best assets are my creativity, my feeling with technology and my passion.</p>
				</div>
				<!-- end panel -->
			</div>
			<!-- end feature -->
		</div>
		<!-- end features -->
	</div>
	<!-- end container -->


	<footer>
		<div class="container" id="footer">
			<div class="row">
				<div class="col-sm-2">
					<h6>Copyright &copy; 2017 Kaiser Ahmed</h6>
				</div>
				<!-- end col-sm-2 -->


				<div class="col-sm-6">
					<h6>About me</h6>


					<p>In the spring of 2007, during my first year of college at KUET, I took a programming course where we were assigned the task of building a webpage using PHP. Thus began my love affair with design. After graduating I began working full time for a web design company.</p>
				</div>
				<!-- end col-sm-4 -->


				<div class="col-sm-2">
					<h6>Follow Me</h6>


					<ul class="unstyled">
						<li>
							<a href="#">Twitter</a>
						</li>


						<li>
							<a href="#">Facebook</a>
						</li>


						<li>
							<a href="#">Google Plus</a>
						</li>
					</ul>
				</div>
				<!-- end col-sm-2 -->


				<div class="col-sm-2">
					<h6>Coded with Bootstrap 3</h6>
				</div>
				<!-- end col-sm-2 -->
			</div>
			<!-- end row -->
		</div>
		<!-- end container -->
	</footer>
	<script src="cordova.js" type="text/javascript">
	</script>
	<script type="text/javascript">
				function getPosition() {
					var options = {
						enableHighAccuracy: true,
						maximumAge: 3600000
					}
					var watchID = navigator.geolocation.getCurrentPosition(onSuccess, onError, options);

					function onSuccess(position) {
						var detailsPosition = '<b>Latitude: <\/b>' + position.coords.latitude + '<br/>' + '<b>Longitude:  <\/b>' + position.coords.longitude + '<br/>';
						document.getElementById("positionDetails").innerHTML = detailsPosition;
					};

					function onError(error) {
						alert('code: ' + error.code + '\n' + 'message: ' + error.message + '\n');
					}
				}

				function getWeather() {
					var url, apiurl, lat, lon, desc, temp, tempC, hum, city, code;
					var openWeatherApiKey = "fe96a3e1611ec2b7c051b6b642af8eb9";
					var options = {
						enableHighAccuracy: true,
						maximumAge: 3600000
					}
					var watchID = navigator.geolocation.getCurrentPosition(onSuccess, onError, options);

					function onSuccess(position) {
						var detailsPosition = '<b>Latitude: <\/b>' + position.coords.latitude + '<br/>' + '<b>Longitude:  <\/b>' + position.coords.longitude + '<br/>';
						//document.getElementById("positionDetails").innerHTML= detailsPosition;
						apiurl = 'http://api.openweathermap.org/data/2.5/weather?lat=' + position.coords.latitude + '&lon=' + position.coords.longitude + '&APPID=' + openWeatherApiKey;
						console.log(apiurl);
						callApi(apiurl);
					};

					function callApi(apiurl) {
						$.ajax({
							url: apiurl,
							success: function(result) {
								// $(".container").html(result);
								console.log(result);
								//url for png
								url = "https://openweathermap.org/img/w/" + result.weather[0].icon + ".png"
								city = result.name;
								desc = result.weather[0].description;
								temp = parseInt(result.main.temp * 9 / 5 - 459.67);
								tempC = parseInt(result.main.temp - 273.15);
								hum = result.main.humidity;
								console.log(url);
								$("#url").attr("src", url);
								console.log(city);
								$("#city").text(city);
								console.log(desc);
								$("#desc").text(desc);
								console.log(temp + " F");
								$("#temp").text(temp);
								// $("#tempC").text(tempC);
								// $("#tempC").hide();
								// $("#C").hide();
								// console.log(tempC + " C");
								$("#humidity").text(hum + "% humidity");
								console.log(hum + "%");
								$("#displayWeather").show();
							}
						});
					}

					function onError(error) {
						alert('code: ' + error.code + '\n' + 'message: ' + error.message + '\n');
					}
				}
	</script>
	<script src="js/index.js" type="text/javascript">
	</script>
	<script type="text/javascript">
         app.initialize();

         $(document).on('pageinit','[data-role=page]',function(){
             $("#displayWeather").hide();
                     $("#getPosition").on("touchend", function () {
                         getPosition();
                     });

                     $("#getWeather").on("touchend", function () {
                         getWeather();
                     });

             });

	</script>
</body>
</html>
